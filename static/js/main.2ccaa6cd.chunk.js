(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/play.5004d330.svg"},20:function(e,t,a){e.exports=a.p+"static/media/pause.07100aab.svg"},21:function(e,t,a){e.exports=a.p+"static/media/volume.69de45ca.svg"},22:function(e,t,a){e.exports=a.p+"static/media/logo.02d30e17.svg"},24:function(e,t,a){e.exports=a(38)},34:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),i=a(2),s=a(3),l=a(5),d=a(4),u=a(6),p=a(10),m=function(){return r.a.createElement("div",{className:"loader__wrapper"},r.a.createElement("div",{className:"sk-folding-cube"},r.a.createElement("div",{className:"sk-cube1 sk-cube"}),r.a.createElement("div",{className:"sk-cube2 sk-cube"}),r.a.createElement("div",{className:"sk-cube4 sk-cube"}),r.a.createElement("div",{className:"sk-cube3 sk-cube"})))},_=r.a.memo(function(e){return r.a.createElement("div",{className:"radio__header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"logo",id:"logo"},r.a.createElement("a",{href:e.link,className:"logo__link"},r.a.createElement("img",{src:e.logo,className:"logo__img",alt:"logo"})))))}),f=r.a.memo(function(e){return r.a.createElement("div",{className:"radio__all"},r.a.createElement("h2",{className:"radio__title alerta large-font"},"Podcasts:"),r.a.createElement("div",{className:"radio__wrap"},e.podcasts_array))}),v=r.a.memo(function(e){return e.podcasts_array.length?r.a.createElement("div",{className:"radio__recent"},r.a.createElement("h2",{className:"radio__title alerta large-font"},"Recent Played:"),r.a.createElement("div",{className:"radio__wrap radio__wrap_latest"},e.podcasts_array)):r.a.createElement("div",{className:"radio__recent radio__recent_hidden"})}),g=r.a.memo(function(e){if(e.shown)return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"podcast__cover",style:{backgroundImage:"url(".concat(e.cover_image,")")}}),r.a.createElement("div",{className:"podcast__wrapper"},r.a.createElement("div",{className:"podcast__title"},r.a.createElement("p",null,e.title),r.a.createElement("p",null,e.publishing_date))))}),h=a(7);function E(e){var t=e.split(":");return t.length>2?3600*Number(t[0])+60*Number(t[1])+Number(t[2]):2===t.length?60*Number(t[0])+Number(t[1]):Number(t[0])}var b={FETCH_PODCASTS_BEGIN:"FETCH_PODCASTS_BEGIN",FETCH_PODCASTS_SUCCESS:"FETCH_PODCASTS_SUCCESS",FETCH_PODCASTS_FAILURE:"FETCH_PODCASTS_FAILURE",UPDATE_PODCASTS:"UPDATE_PODCASTS",LOAD_MORE_PODCASTS:"LOAD_MORE_PODCASTS",CHANGE_VOLUME:"CHANGE_VOLUME"},y=function(){return{type:b.FETCH_PODCASTS_BEGIN}},O=function(e){return{type:b.FETCH_PODCASTS_SUCCESS,payload:e}},w=function(e){return{type:b.FETCH_PODCASTS_FAILURE,payload:e}},N=function(e){return{type:b.UPDATE_PODCASTS,payload:e}};function S(e){return function(t){return t(y()),fetch(e).then(function(e){return e.text()}).then(function(e){return function e(t){var a={};if(1===t.nodeType){if(t.attributes.length>0){a["@attributes"]={};for(var n=0;n<t.attributes.length;n++){var r=t.attributes.item(n);a["@attributes"][r.nodeName]=r.nodeValue}}}else 3===t.nodeType&&(a=t.nodeValue);if(t.hasChildNodes())for(var o=0;o<t.childNodes.length;o++){var c=t.childNodes.item(o),i=c.nodeName;if("undefined"==typeof a[i])a[i]=e(c);else{if("undefined"==typeof a[i].push){var s=a[i];a[i]=[],a[i].push(s)}a[i].push(e(c))}}return a}((new DOMParser).parseFromString(e,"text/xml")).rss.channel.item.map(function(e,t){return function(e){return{index:"".concat(Number(e["itunes:season"]["#text"])).concat(Number(e["itunes:episode"]["#text"])).concat(E(e["itunes:duration"]["#text"])),title:e.title["#text"].split(" - ")[0],publishing_date:e.title["#text"].split(" - ")[1],description:e.description["#text"],duration:e["itunes:duration"]["#text"],duration_in_sec:E(e["itunes:duration"]["#text"]),source:e.guid["#text"],cover_image:e.wideImage["#text"],current_time:0}}(e)})}).then(function(e){return t(O(e))}).catch(function(e){return t(w(e))})}}function C(e){return function(t,a){var n=a().podcasts,r=n.all_podcasts,o=n.recent_podcasts,c=n.cache_counter,i={active_podcast:e};r.map(function(t,a){t.index===e.index&&(r[a]=e)}),i.all_podcasts=r;var s=function(e,t){var a=-1;return e.map(function(e,n){e.index===t.index&&(a=n)}),a}(o,e);s>-1?(!function(e,t,a){if(a>=e.length)for(var n=a-e.length+1;n--;)e.push(void 0);e.splice(a,0,e.splice(t,1)[0])}(o,s,0),o[0]=e):o.unshift(e),o.length>c&&(o=o.splice(0,c)),i.recent_podcasts=o,t(N(i))}}var T=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={shown:!1},a.componentWillMount=function(){a.el=r.a.createRef()},a.componentDidMount=function(){a.loadImage()},a.loadImage=function(){a.image=new Image,a.image.addEventListener("load",function(){delete a.image,a.setState({shown:!0})}),a.image.src=a.props.info.cover_image},a.update=function(){a.props.updateInfo(a.props.info)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.info,a=e.active;return r.a.createElement("div",{className:"podcast roboto ".concat(this.state.shown?"podcast_shown":""," ").concat(a?"podcast_active":""),onClick:this.update,ref:this.el},r.a.createElement(g,{shown:this.state.shown,active:a,cover_image:t.cover_image,title:t.title,publishing_date:t.publishing_date}))}}]),t}(n.Component),j=Object(h.b)(function(e){return{state:e.podcasts.active_podcast}},function(e){return{updateInfo:function(t){e(C(t))}}})(T),A=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={type:a.props.type,duration:a.props.duration,value:a.props.value,progress:a.props.progress,drag_size:a.props.drag_size,direction:a.props.direction,force_update:a.props.force_update,dragging:!1,autohide:a.props.autohide},a.componentWillMount=function(){a.callback=a.props.callback,a.slider_drag=r.a.createRef(),a.slider_bar=r.a.createRef(),a.slider_progress=r.a.createRef()},a.componentDidMount=function(){a.recalculateOffsets(),window.addEventListener("resize",Object(p.debounce)(a.recalculateOffsets,400))},a.componentWillUnmount=function(){window.removeEventListener("resize",Object(p.debounce)(a.recalculateOffsets,400))},a.componentWillReceiveProps=function(e){e!==a.props&&!1===a.state.dragging&&a.setState(e)},a.recalculateOffsets=function(){null!=a.slider_bar.current&&(a.slider_bar_left=a.slider_bar.current.getBoundingClientRect().left,a.slider_bar_width=a.slider_bar.current.getBoundingClientRect().width)},a.updateProgress=function(e,t){var n=e.clientX,r=a.state.value*((n-a.slider_bar_left)/a.slider_bar_width),o={progress:r=r>a.state.value?a.state.value:r<0?0:r};void 0!==t&&Object.keys(t).map(function(e){o[e]=t[e]}),a.setState(o,function(){if(!1===a.state.dragging||a.state.force_update){var e="volume"===a.state.type?100:1;a.callback(r/e),a.allow_progress=!1}})},a.pointerDown=function(){a.setState({dragging:!0},function(){return a.allow_progress=!0}),window.addEventListener("pointermove",a.updateProgress),window.addEventListener("pointerup",a.pointerUp)},a.pointerUp=function(e){window.removeEventListener("pointermove",a.updateProgress),window.removeEventListener("pointerup",a.pointerUp),a.updateProgress(e,{dragging:!1})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e="volume"===this.state.type?Math.round(this.state.progress):function(e){var t=parseInt(Math.floor(e),10),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),r=t-3600*a-60*n;return a<10&&(a="0"+a),n<10&&(n="0"+n),r<10&&(r="0"+r),"".concat(a,":").concat(n,":").concat(r)}(this.state.progress),t="".concat(this.state.progress/this.state.value*100,"%");return r.a.createElement("div",{className:"slider ".concat(this.state.dragging?"slider_dragging":""," ").concat(this.state.autohide?"slider_autohide":"")},r.a.createElement("span",{className:"slider__bar",ref:this.slider_bar,onClick:this.pointerUp},r.a.createElement("span",{className:"slider__cur",ref:this.slider_progress,style:{width:t}}),r.a.createElement("span",{className:"slider__drag",onPointerDown:this.pointerDown,ref:this.slider_drag,style:{left:t,width:"".concat(this.state.drag_size,"px"),height:"".concat(this.state.drag_size,"px")}})),r.a.createElement("div",{className:"slider__range roboto xxsmall-font"},r.a.createElement("span",{className:"slider__range-cur"},e),r.a.createElement("span",{className:"slider__range-length"},this.state.duration)))}}]),t}(n.Component),k=a(19),P=a.n(k),D=a(20),x=a.n(D),M=a(21),U=a.n(M),L=r.a.memo(function(e){return r.a.createElement("div",{className:"radio__player-wrap".concat(e.active?" radio__player-wrap_active":"")},r.a.createElement("div",{className:"player".concat(e.playing?" player_playing":""),id:"player"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"player__wrap"},r.a.createElement("div",{className:"player__cover"},r.a.createElement("img",{src:e.cover_image,alt:"podcast cover"}),r.a.createElement("h3",{className:"player__title roboto small-font"},r.a.createElement("p",null,e.title),r.a.createElement("p",null,e.publishing_date))),r.a.createElement("div",{className:"player__controls"},r.a.createElement("div",{className:"player__row player__row_center"},r.a.createElement("span",{className:"player__playback",onClick:e.play_btn_callback},r.a.createElement("img",{className:"player__icon player__icon_play",src:P.a,alt:"play icon"}),r.a.createElement("img",{className:"player__icon player__icon_pause",src:x.a,alt:"pause icon"}))),r.a.createElement("div",{className:"player__time"},r.a.createElement(A,{type:"time",duration:e.podcast.duration,value:e.podcast.duration_in_sec,progress:e.podcast.current_time,drag_size:10,direction:"horizontal",callback:e.time_callback,force_update:!1,autohide:!1})),r.a.createElement("div",{className:"player__volume"},r.a.createElement("img",{src:U.a,className:"player__icon player__icon_volume",alt:"volume icon"}),r.a.createElement(A,{type:"volume",duration:100,value:100,progress:100*e.volume||100,drag_size:10,direction:"horizontal",callback:e.volume_callback,force_update:!0,autohide:!0})))))))}),F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={playing:!1},a.componentWillMount=function(){a.audio=new Audio,a.audio.volume=1,a.audio.addEventListener("timeupdate",a.progressUpdate),a.audio.addEventListener("ended",a.audioEnded)},a.audioEnded=function(){a.setState({playing:!1})},a.togglePlay=function(){a.setState({playing:!a.state.playing},function(){a.state.playing?a.audio.play():a.audio.pause()})},a.progressUpdate=function(){var e=Object.assign({},a.props.podcast);e.current_time=a.audio.currentTime,a.props.updateInfo(e)},a.updateAudio=function(){a.audio.src!==a.props.podcast.source&&(a.audio.src=a.props.podcast.source,a.audio.currentTime=a.props.podcast.current_time||0,a.state.playing?a.audio.play():a.audio.pause())},a.recieveTimeFromSlider=function(e){a.audio.currentTime=e},a.recieveVolumeFromSlider=function(e){a.audio.volume=e,a.props.changeVolume(e)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.volume,a=(e.current_time,e.podcast);return this.updateAudio(),r.a.createElement(L,{active:Object.keys(a).length,podcast:a,playing:this.state.playing,cover_image:a.cover_image,title:a.title,publishing_date:a.publishing_date,play_btn_callback:this.togglePlay,time_callback:this.recieveTimeFromSlider,volume_callback:this.recieveVolumeFromSlider,volume:t})}}]),t}(n.Component),I=Object(h.b)(function(e){return{volume:e.player.volume,current_time:e.player.current_time,podcast:e.podcasts.active_podcast}},function(e){return{updateInfo:function(t){e(C(t))},changeVolume:function(t){e(function(e){return{type:b.CHANGE_VOLUME,payload:e}}(t))}}})(F),R=a(22),H=a.n(R),V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.props.fetch(a.props.podcasts.api_link),window.addEventListener("scroll",Object(p.debounce)(a.loadMore,300))},a.componentWillUnmount=function(){window.removeEventListener("scroll",Object(p.debounce)(a.loadMore,300))},a.loadMore=function(){window.innerHeight+window.scrollY>=document.body.scrollHeight-100&&a.props.podcasts.podcasts_amount>=a.props.podcasts.amount_to_display&&a.props.loadMorePodcasts(a.props.podcasts.amount_to_display+a.props.podcasts.amount_to_display_increment)},a.createPodcastsToRender=function(e,t){return(t?e.slice(0,t):e).map(function(e){var t=e===a.props.podcasts.active_podcast;return r.a.createElement(j,{key:e.index,info:e,active:t})})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.podcasts,t="";return e.loading&&(t=r.a.createElement(m,null)),r.a.createElement("div",{className:"radio",id:"radio"},t,r.a.createElement(_,{link:"#1",logo:H.a}),r.a.createElement(v,{podcasts_array:this.createPodcastsToRender(e.recent_podcasts)}),r.a.createElement(f,{podcasts_array:this.createPodcastsToRender(e.all_podcasts,e.amount_to_display)}),r.a.createElement(I,null))}}]),t}(n.Component),z=Object(h.b)(function(e){return{podcasts:e.podcasts}},function(e){return{fetch:function(t){e(S(t))},loadMorePodcasts:function(t){e(function(e){return{type:b.LOAD_MORE_PODCASTS,payload:e}}(t))}}})(V),B=(a(34),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement(z,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(8),W=a(9),X={api_link:"https://tools.planetradio.co.uk/core/podcasts/rss.php?name=radio-1-norge",all_podcasts:[],active_podcast:{},recent_podcasts:[],loading:!1,error:null,podcasts_amount:null,amount_to_display:12,amount_to_display_increment:12,cache_counter:5};var J={current_time:0,volume:1};var Y=Object(G.c)({podcasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case b.FETCH_PODCASTS_BEGIN:return Object(W.a)({},e,{loading:!0,error:null});case b.FETCH_PODCASTS_SUCCESS:return Object(W.a)({},e,{all_podcasts:n,podcasts_amount:n.length,loading:!1,error:null});case b.FETCH_PODCASTS_FAILURE:return Object(W.a)({},e,{loading:!1,error:n});case b.LOAD_MORE_PODCASTS:return Object(W.a)({},e,{amount_to_display:n});case b.UPDATE_PODCASTS:return Object(W.a)({},e,{active_podcast:n.active_podcast,all_podcasts:n.all_podcasts,recent_podcasts:n.recent_podcasts});default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case b.CHANGE_VOLUME:return Object(W.a)({},e,{volume:n});default:return e}}}),$=a(23),q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,K=Object(G.e)(Y,q(Object(G.a)($.a)));c.a.render(r.a.createElement(h.a,{store:K},r.a.createElement(B,null)),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.2ccaa6cd.chunk.js.map